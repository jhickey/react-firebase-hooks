!function(e,n){"use strict";var r=function(){return(r=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var u in n=arguments[r])Object.prototype.hasOwnProperty.call(n,u)&&(e[u]=n[u]);return e}).apply(this,arguments)},t=function(e,n,t){var u,o;if(e.exists)return r({},e.data(),n?((u={})[n]=e.id,u):null,t?((o={})[t]=e.ref,o):null)},u=function(e){return{loading:void 0===e||null===e,value:e}},o=function(e){var t=e?e():void 0,o=n.useReducer(function(e,n){switch(n.type){case"error":return r({},e,{error:n.error,loading:!1,value:void 0});case"reset":return u(n.defaultValue);case"value":return r({},e,{error:void 0,loading:!1,value:n.value});default:return e}},u(t)),i=o[0],c=o[1],a=function(){var n=e?e():void 0;c({type:"reset",defaultValue:n})},s=function(e){c({type:"error",error:e})},f=function(e){c({type:"value",value:e})};return n.useMemo(function(){return{error:i.error,loading:i.loading,reset:a,setError:s,setValue:f,value:i.value}},[i.error,i.loading,a,s,f,i.value])},i=function(e,n){var r=!e&&!n,t=!!e&&!!n&&e.isEqual(n);return r||t},c=function(e,r){return function(e,r,t){var u=n.useRef(e);return n.useEffect(function(){r(e,u.current)||(u.current=e,t&&t())}),u}(e,i,r)},a=function(e,r,t){var u=o(),i=u.error,a=u.loading,s=u.reset,f=u.setError,l=u.setValue,v=u.value,d=c(r,s);n.useEffect(function(){if(d.current){if(e){var n=t&&t.snapshotListenOptions?d.current.onSnapshot(t.snapshotListenOptions,l,f):d.current.onSnapshot(l,f);return function(){n()}}d.current.get(t?t.getOptions:void 0).then(l).catch(f)}else l(void 0)},[d.current]);var p=[v,a,i];return n.useMemo(function(){return p},p)},s=function(e,r,u){var o=u?u.idField:void 0,i=u?u.refField:void 0,c=a(e,r,u),s=c[0],f=c[1],l=c[2],v=[n.useMemo(function(){return s?s.docs.map(function(e){return t(e,o,i)}):void 0},[s,o,i]),f,l];return n.useMemo(function(){return v},v)},f=function(e,r,t){var u=o(),i=u.error,a=u.loading,s=u.reset,f=u.setError,l=u.setValue,v=u.value,d=c(r,s);n.useEffect(function(){if(d.current){if(e){var n=t&&t.snapshotListenOptions?d.current.onSnapshot(t.snapshotListenOptions,l,f):d.current.onSnapshot(l,f);return function(){n()}}d.current.get(t?t.getOptions:void 0).then(l).catch(f)}else l(void 0)},[d.current]);var p=[v,a,i];return n.useMemo(function(){return p},p)},l=function(e,r,u){var o=u?u.idField:void 0,i=u?u.refField:void 0,c=f(e,r,u),a=c[0],s=c[1],l=c[2],v=[n.useMemo(function(){return a?t(a,o,i):void 0},[a,o,i]),s,l];return n.useMemo(function(){return v},v)};e.useCollection=function(e,n){return a(!0,e,n)},e.useCollectionOnce=function(e,n){return a(!1,e,n)},e.useCollectionData=function(e,n){return s(!0,e,n)},e.useCollectionDataOnce=function(e,n){return s(!1,e,n)},e.useDocument=function(e,n){return f(!0,e,n)},e.useDocumentData=function(e,n){return l(!0,e,n)},e.useDocumentOnce=function(e,n){return f(!1,e,n)},e.useDocumentDataOnce=function(e,n){return l(!1,e,n)}}(this["react-firebase-hooks"]=this["react-firebase-hooks"]||{},react);
//# sourceMappingURL=react-firebase-hooks-firestore.js.map
